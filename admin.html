<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - Central Academy School</title>
    <meta name="description" content="Admin dashboard for Central Academy School website management.">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Anime.js for animations -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom Admin Script -->
    <script src="admin.js"></script>
    
    <style>
        :root {
            --primary-orange: #D2691E;
            --warm-copper: #B87333;
            --soft-cream: #FFF8DC;
            --charcoal-gray: #36454F;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f5f5f5;
        }
        
        .sidebar {
            background: linear-gradient(135deg, var(--primary-orange) 0%, var(--warm-copper) 100%);
            min-height: 100vh;
        }
        
        .sidebar-nav a {
            transition: all 0.3s ease;
        }
        
        .sidebar-nav a:hover {
            background-color: rgba(255, 255, 255, 0.1);
            transform: translateX(5px);
        }
        
        .sidebar-nav a.active {
            background-color: rgba(255, 255, 255, 0.2);
            border-left: 4px solid white;
        }
        
        .card {
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        
        .btn-primary {
            background-color: var(--primary-orange);
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            background-color: var(--warm-copper);
            transform: translateY(-2px);
        }
        
        .upload-area {
            border: 2px dashed var(--primary-orange);
            transition: all 0.3s ease;
        }
        
        .upload-area.drag-over {
            border-color: var(--warm-copper);
            background-color: rgba(210, 105, 30, 0.1);
        }
        
        .modal {
            backdrop-filter: blur(5px);
        }
        
        .hidden {
            display: none;
        }
        
        .fade-in {
            animation: fadeIn 0.3s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>
    <!-- Admin Login Modal -->
    <div id="admin-login-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg p-8 max-w-md w-full mx-4">
            <div class="text-center mb-6">
                <img src="resources/school_logo_color.png" alt="School Logo" class="h-16 w-auto mx-auto mb-4">
                <h2 class="text-2xl font-bold text-gray-800">Admin Login</h2>
                <p class="text-gray-600">Central Academy School CMS</p>
            </div>
            
            <form id="admin-login-form">
                <div class="mb-4">
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Username</label>
                    <input type="text" id="email" name="email" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
                           placeholder="Enter username">
                </div>
                
                <div class="mb-6">
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="password" name="password" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"
                           placeholder="Enter password">
                </div>
                
                <button type="submit" class="w-full btn-primary text-white py-2 px-4 rounded-lg font-semibold">
                    Login
                </button>
            </form>
            
            <div class="mt-4 text-center">
                <p class="text-sm text-gray-500">
                    Admin Login - Central Academy School CMS
                </p>
            </div>
        </div>
    </div>

    <!-- Admin Dashboard -->
    <div id="admin-dashboard" class="hidden">
        <div class="flex min-h-screen">
            <!-- Sidebar -->
            <div class="sidebar w-64 text-white">
                <div class="p-6">
                    <div class="flex items-center mb-8">
                        <img src="resources/school_logo_color.png" alt="School Logo" class="h-10 w-auto mr-3">
                        <div>
                            <h2 class="text-lg font-bold">Admin Panel</h2>
                            <p class="text-sm opacity-75">Central Academy</p>
                        </div>
                    </div>
                    
                    <nav class="sidebar-nav space-y-2">
                        <a href="#dashboard" class="dashboard-nav block py-3 px-4 rounded-lg active">
                            <i class="fas fa-tachometer-alt mr-3"></i>Dashboard
                        </a>
                        <a href="#content" class="content-nav block py-3 px-4 rounded-lg">
                            <i class="fas fa-edit mr-3"></i>Content Editor
                        </a>
                        <a href="#events" class="events-nav block py-3 px-4 rounded-lg">
                            <i class="fas fa-calendar-alt mr-3"></i>Event Manager
                        </a>
                        <a href="#media" class="media-nav block py-3 px-4 rounded-lg">
                            <i class="fas fa-images mr-3"></i>Media Library
                        </a>
                        <a href="#routine" class="routine-nav block py-3 px-4 rounded-lg">
                            <i class="fas fa-clock mr-3"></i>Routine Manager
                        </a>
                        <a href="#contact" class="contact-nav block py-3 px-4 rounded-lg">
                            <i class="fas fa-address-book mr-3"></i>Contact Info
                        </a>
                        <a href="#about" class="about-nav block py-3 px-4 rounded-lg">
                            <i class="fas fa-user-tie mr-3"></i>About Section
                        </a>
                        <a href="#settings" class="settings-nav block py-3 px-4 rounded-lg">
                            <i class="fas fa-cog mr-3"></i>Settings
                        </a>
                        <a href="#" id="admin-logout" class="block py-3 px-4 rounded-lg hover:bg-red-600 transition-colors">
                            <i class="fas fa-sign-out-alt mr-3"></i>Logout
                        </a>
                    </nav>
                </div>
            </div>
            
            <!-- Main Content -->
            <div class="flex-1 bg-gray-50">
                <!-- Header -->
                <div class="bg-white shadow-sm border-b">
                    <div class="px-6 py-4">
                        <div class="flex justify-between items-center">
                            <h1 class="text-2xl font-bold text-gray-800" id="page-title">Dashboard</h1>
                            <div class="flex items-center space-x-4">
                                <span class="text-gray-600">Welcome, <span id="admin-name">Administrator</span></span>
                                <button id="preview-btn" class="btn-primary text-white px-4 py-2 rounded-lg" onclick="window.open('index.html', '_blank')">
                                    <i class="fas fa-eye mr-2"></i>Preview Site
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Dashboard Content -->
                <div id="dashboard-content" class="p-6">
                    <!-- Dashboard Overview -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="card bg-white rounded-lg p-6 shadow-sm">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-blue-100 text-blue-600">
                                    <i class="fas fa-file-alt text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Total Pages</p>
                                    <p class="text-2xl font-bold text-gray-900">6</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card bg-white rounded-lg p-6 shadow-sm">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-green-100 text-green-600">
                                    <i class="fas fa-calendar-alt text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Events</p>
                                    <p class="text-2xl font-bold text-gray-900">5</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card bg-white rounded-lg p-6 shadow-sm">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-orange-100 text-orange-600">
                                    <i class="fas fa-images text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Images</p>
                                    <p class="text-2xl font-bold text-gray-900">38</p>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card bg-white rounded-lg p-6 shadow-sm">
                            <div class="flex items-center">
                                <div class="p-3 rounded-full bg-purple-100 text-purple-600">
                                    <i class="fas fa-eye text-xl"></i>
                                </div>
                                <div class="ml-4">
                                    <p class="text-sm font-medium text-gray-600">Page Views</p>
                                    <p class="text-2xl font-bold text-gray-900">1,234</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Recent Activity -->
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Recent Activity</h3>
                            <div class="space-y-4">
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-green-500 rounded-full mr-3"></div>
                                    <p class="text-sm text-gray-600">Updated hero section content</p>
                                    <span class="ml-auto text-xs text-gray-400">2 hours ago</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-blue-500 rounded-full mr-3"></div>
                                    <p class="text-sm text-gray-600">Added new event images</p>
                                    <span class="ml-auto text-xs text-gray-400">5 hours ago</span>
                                </div>
                                <div class="flex items-center">
                                    <div class="w-2 h-2 bg-orange-500 rounded-full mr-3"></div>
                                    <p class="text-sm text-gray-600">Modified contact information</p>
                                    <span class="ml-auto text-xs text-gray-400">1 day ago</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="bg-white rounded-lg shadow-sm p-6">
                            <h3 class="text-lg font-semibold text-gray-800 mb-4">Quick Actions</h3>
                            <div class="space-y-3">
                                <button class="w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-plus text-green-500 mr-3"></i>Add New Event
                                </button>
                                <button class="w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-upload text-blue-500 mr-3"></i>Upload Images
                                </button>
                                <button class="w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-edit text-orange-500 mr-3"></i>Edit Homepage
                                </button>
                                <button class="w-full text-left p-3 rounded-lg border border-gray-200 hover:bg-gray-50 transition-colors">
                                    <i class="fas fa-cog text-purple-500 mr-3"></i>Site Settings
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Content Editor -->
                <div id="content-editor" class="hidden p-6">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-6">Edit Website Content</h3>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Page Selection</label>
                                <select id="page-selector" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
                                    <option value="index">Homepage</option>
                                    <option value="about">About Page</option>
                                    <option value="events">Events Page</option>
                                    <option value="routine">Routine Page</option>
                                    <option value="contact">Contact Page</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Content Section</label>
                                <select id="content-section" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
                                    <option value="hero-title">Hero Title</option>
                                    <option value="hero-subtitle">Hero Subtitle</option>
                                    <option value="hero-tagline1">Hero Tagline 1</option>
                                    <option value="hero-tagline2">Hero Tagline 2</option>
                                    <option value="classes-info">Classes Information</option>
                                </select>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Content Text</label>
                                <textarea id="content-text" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" placeholder="Enter your content here..."></textarea>
                            </div>
                            
                            <div class="flex space-x-4">
                                <button id="save-content" class="btn-primary text-white px-6 py-2 rounded-lg font-semibold">
                                    Save Changes
                                </button>
                                <button id="preview-content" class="bg-gray-500 text-white px-6 py-2 rounded-lg font-semibold hover:bg-gray-600">
                                    Preview
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Event Manager -->
                <div id="event-manager" class="hidden p-6">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-gray-800">Event Management</h3>
                            <button id="add-event-btn" class="btn-primary text-white px-4 py-2 rounded-lg font-semibold">
                                <i class="fas fa-plus mr-2"></i>Add Event
                            </button>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6" id="events-grid">
                            <!-- Events will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <!-- Media Library -->
                <div id="media-library" class="hidden p-6">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-lg font-semibold text-gray-800">Media Library</h3>
                            <button id="upload-media-btn" class="btn-primary text-white px-4 py-2 rounded-lg font-semibold">
                                <i class="fas fa-upload mr-2"></i>Upload Media
                            </button>
                        </div>
                        
                        <div id="media-upload-area" class="upload-area rounded-lg p-8 text-center mb-6">
                            <i class="fas fa-cloud-upload-alt text-4xl text-gray-400 mb-4"></i>
                            <p class="text-gray-600 mb-2">Drag and drop images here</p>
                            <p class="text-sm text-gray-500">or click to browse files</p>
                            <input type="file" id="media-input" multiple accept="image/*" class="hidden">
                        </div>
                        
                        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="media-grid">
                            <!-- Media items will be loaded here -->
                        </div>
                    </div>
                </div>
                
                <!-- Routine Manager -->
                <div id="routine-manager" class="hidden p-6">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-6">Routine Management</h3>
                        
                        <div class="space-y-4" id="routine-list">
                            <!-- Routine items will be loaded here -->
                        </div>
                        
                        <button id="add-routine-btn" class="btn-primary text-white px-4 py-2 rounded-lg font-semibold mt-6">
                            <i class="fas fa-plus mr-2"></i>Add Routine
                        </button>
                    </div>
                </div>
                
                <!-- Contact Manager -->
                <div id="contact-manager" class="hidden p-6">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-6">Contact Information</h3>
                        
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Primary Phone</label>
                                <input type="tel" id="phone1" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" value="9608508156">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Secondary Phone</label>
                                <input type="tel" id="phone2" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" value="8789508120">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                                <input type="email" id="email" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" value="centralacademyschoolsimdega@gmail.com">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Instagram URL</label>
                                <input type="url" id="instagram" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" value="https://www.instagram.com/simdega_central_academy">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Facebook URL</label>
                                <input type="url" id="facebook" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" value="https://www.facebook.com/share/1GjhwB5vqu">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Google Maps URL</label>
                                <input type="url" id="map-url" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" value="https://maps.app.goo.gl/DWiGh3EgZSdC6EbL6">
                            </div>
                            
                            <button id="save-contact" class="btn-primary text-white px-6 py-2 rounded-lg font-semibold">
                                Save Contact Info
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- About Section Manager -->
                <div id="about-content" class="hidden p-6">
                    <!-- About content will be loaded here by JavaScript -->
                </div>
                
                <!-- Settings -->
                <div id="settings" class="hidden p-6">
                    <div class="bg-white rounded-lg shadow-sm p-6">
                        <h3 class="text-lg font-semibold text-gray-800 mb-6">Site Settings</h3>
                        
                        <div class="space-y-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Site Title</label>
                                <input type="text" id="site-title" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" value="Central Academy School, Simdega">
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Site Description</label>
                                <textarea id="site-description" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">Excellence in Education, Nurturing Young Minds</textarea>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Maintenance Mode</label>
                                <div class="flex items-center">
                                    <input type="checkbox" id="maintenance-mode" class="mr-3">
                                    <span class="text-sm text-gray-600">Enable maintenance mode</span>
                                </div>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Backup & Export</label>
                                <div class="space-x-4">
                                    <button class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600">
                                        Export Data
                                    </button>
                                    <button class="bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600">
                                        Import Data
                                    </button>
                                </div>
                            </div>
                            
                            <button id="save-settings" class="btn-primary text-white px-6 py-2 rounded-lg font-semibold">
                                Save Settings
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Event Form Modal -->
    <div id="event-form-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden modal">
        <div class="bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-full overflow-y-auto">
            <div class="flex justify-between items-center mb-6">
                <h3 class="text-xl font-bold text-gray-800">Add New Event</h3>
                <button id="close-event-modal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            
            <form id="event-form">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Event Title</label>
                        <input type="text" id="event-title" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                        <select id="event-category" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
                            <option value="art-craft">Art & Craft</option>
                            <option value="science">Science</option>
                            <option value="cultural">Cultural</option>
                            <option value="yoga">Yoga Day</option>
                            <option value="upcoming">Upcoming</option>
                            <option value="past">Past Events</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Date</label>
                        <input type="date" id="event-date" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500" required>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Description</label>
                        <textarea id="event-description" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Event Images</label>
                        <input type="file" id="event-images" multiple accept="image/*" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500">
                    </div>
                </div>
                
                <div class="flex justify-end space-x-4 mt-6">
                    <button type="button" id="cancel-event" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">
                        Cancel
                    </button>
                    <button type="submit" class="btn-primary text-white px-4 py-2 rounded-lg font-semibold">
                        Save Event
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Main JavaScript -->
    <script src="main.js"></script>
    
    <script>
        // Admin-specific JavaScript
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize admin dashboard
            initAdminDashboard();
        });
        
        function initAdminDashboard() {
            // Check if user is logged in
            const adminSession = localStorage.getItem('adminSession');
            if (adminSession) {
                showAdminDashboard();
            } else {
                showLoginModal();
            }
            
            // Navigation handling
            const navLinks = document.querySelectorAll('.sidebar-nav a');
            navLinks.forEach(link => {
                if (link.id !== 'admin-logout') {
                    link.addEventListener('click', handleNavigation);
                }
            });
            
            // Modal handling
            const closeModalBtn = document.getElementById('close-event-modal');
            const cancelEventBtn = document.getElementById('cancel-event');
            const addEventBtn = document.getElementById('add-event-btn');
            
            if (closeModalBtn) closeModalBtn.addEventListener('click', hideEventModal);
            if (cancelEventBtn) cancelEventBtn.addEventListener('click', hideEventModal);
            if (addEventBtn) addEventBtn.addEventListener('click', showEventModal);
            
            // Form handling
            const loginForm = document.getElementById('admin-login-form');
            if (loginForm) loginForm.addEventListener('submit', handleLogin);
            
            const eventForm = document.getElementById('event-form');
            if (eventForm) eventForm.addEventListener('submit', handleEventSubmit);
            
            // Media upload handling
            const uploadArea = document.getElementById('media-upload-area');
            const mediaInput = document.getElementById('media-input');
            
            if (uploadArea) {
                uploadArea.addEventListener('click', () => mediaInput.click());
                uploadArea.addEventListener('dragover', handleDragOver);
                uploadArea.addEventListener('drop', handleDrop);
            }
            
            if (mediaInput) {
                mediaInput.addEventListener('change', handleFileSelect);
            }
        }
        
        function showLoginModal() {
            document.getElementById('admin-login-modal').style.display = 'flex';
        }
        
        function hideLoginModal() {
            document.getElementById('admin-login-modal').style.display = 'none';
        }
        
        function showAdminDashboard() {
            hideLoginModal();
            document.getElementById('admin-dashboard').classList.remove('hidden');
            loadDashboardData();
        }
        
        function handleLogin(e) {
            e.preventDefault();
            const formData = new FormData(e.target);
            const email = formData.get('email');
            const password = formData.get('password');
            
            // Demo authentication (replace with real authentication)
            if (email === 'admin@centralacademy.com' && password === 'admin123') {
                const adminUser = { email, name: 'School Administrator' };
                localStorage.setItem('adminSession', JSON.stringify(adminUser));
                showAdminDashboard();
            } else {
                alert('Invalid credentials. Please try again.');
            }
        }
        
        function handleNavigation(e) {
            e.preventDefault();
            const target = e.target.getAttribute('href').substring(1);
            showSection(target);
        }
        
        function showSection(sectionName) {
            // Hide all sections
            const sections = ['dashboard-content', 'content-editor', 'event-manager', 'media-library', 'routine-manager', 'contact-manager', 'settings'];
            sections.forEach(section => {
                const element = document.getElementById(section);
                if (element) element.classList.add('hidden');
            });
            
            // Show selected section
            const sectionMap = {
                'dashboard': 'dashboard-content',
                'content': 'content-editor',
                'events': 'event-manager',
                'media': 'media-library',
                'routine': 'routine-manager',
                'contact': 'contact-manager',
                'settings': 'settings'
            };
            
            const targetSection = document.getElementById(sectionMap[sectionName]);
            if (targetSection) {
                targetSection.classList.remove('hidden');
                targetSection.classList.add('fade-in');
            }
            
            // Update navigation active state
            const navLinks = document.querySelectorAll('.sidebar-nav a');
            navLinks.forEach(link => link.classList.remove('active'));
            e.target.classList.add('active');
            
            // Update page title
            const titles = {
                'dashboard': 'Dashboard',
                'content': 'Content Editor',
                'events': 'Event Manager',
                'media': 'Media Library',
                'routine': 'Routine Manager',
                'contact': 'Contact Manager',
                'settings': 'Settings'
            };
            
            document.getElementById('page-title').textContent = titles[sectionName] || 'Dashboard';
        }
        
        function loadDashboardData() {
            // Load events for event manager
            loadEventsForAdmin();
            
            // Load media for media library
            loadMediaLibrary();
            
            // Load routine data
            loadRoutineManager();
        }
        
        function loadEventsForAdmin() {
            const eventsGrid = document.getElementById('events-grid');
            if (!eventsGrid) return;
            
            // Use events from main.js
            if (window.schoolWebsite && window.schoolWebsite.events) {
                const events = window.schoolWebsite.events;
                eventsGrid.innerHTML = '';
                
                events.forEach(event => {
                    const eventCard = createAdminEventCard(event);
                    eventsGrid.appendChild(eventCard);
                });
            }
        }
        
        function createAdminEventCard(event) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-lg shadow-sm border p-4';
            card.innerHTML = `
                <div class="relative mb-4">
                    <img src="${event.images[0]}" alt="${event.title}" class="w-full h-32 object-cover rounded-lg">
                    <div class="absolute top-2 right-2">
                        <span class="bg-orange-500 text-white px-2 py-1 rounded text-xs">
                            ${event.category}
                        </span>
                    </div>
                </div>
                <h4 class="font-semibold text-gray-800 mb-2">${event.title}</h4>
                <p class="text-sm text-gray-600 mb-3">${event.description}</p>
                <div class="flex justify-between items-center">
                    <span class="text-xs text-gray-500">${event.date}</span>
                    <div class="space-x-2">
                        <button class="text-blue-500 hover:text-blue-700 text-sm">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="text-red-500 hover:text-red-700 text-sm">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `;
            return card;
        }
        
        function showEventModal() {
            document.getElementById('event-form-modal').classList.remove('hidden');
        }
        
        function hideEventModal() {
            document.getElementById('event-form-modal').classList.add('hidden');
        }
        
        function handleEventSubmit(e) {
            e.preventDefault();
            // Handle event form submission
            alert('Event saved successfully!');
            hideEventModal();
        }
        
        function loadMediaLibrary() {
            const mediaGrid = document.getElementById('media-grid');
            if (!mediaGrid) return;
            
            // Load uploaded images
            const uploadedImages = JSON.parse(localStorage.getItem('uploadedImages') || '[]');
            
            // Add default images
            const defaultImages = [
                'resources/school_logo_color.png',
                'resources/school_building.jpg',
                'resources/school_park.jpg'
            ];
            
            const allImages = [...defaultImages, ...uploadedImages.map(img => img.url)];
            
            mediaGrid.innerHTML = '';
            allImages.forEach((imageUrl, index) => {
                const mediaItem = createMediaItem(imageUrl, index);
                mediaGrid.appendChild(mediaItem);
            });
        }
        
        function createMediaItem(imageUrl, index) {
            const item = document.createElement('div');
            item.className = 'relative group';
            item.innerHTML = `
                <img src="${imageUrl}" alt="Media ${index + 1}" class="w-full h-24 object-cover rounded-lg">
                <div class="absolute inset-0 bg-black bg-opacity-50 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                    <div class="space-x-2">
                        <button class="text-white hover:text-blue-300">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="text-white hover:text-red-300">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `;
            return item;
        }
        
        function handleDragOver(e) {
            e.preventDefault();
            e.currentTarget.classList.add('drag-over');
        }
        
        function handleDrop(e) {
            e.preventDefault();
            e.currentTarget.classList.remove('drag-over');
            const files = e.dataTransfer.files;
            handleFileUpload(files);
        }
        
        function handleFileSelect(e) {
            const files = e.target.files;
            handleFileUpload(files);
        }
        
        function handleFileUpload(files) {
            Array.from(files).forEach(file => {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = (e) => {
                        const imageData = {
                            id: Date.now(),
                            name: file.name,
                            url: e.target.result,
                            size: file.size,
                            type: file.type
                        };
                        
                        const uploadedImages = JSON.parse(localStorage.getItem('uploadedImages') || '[]');
                        uploadedImages.push(imageData);
                        localStorage.setItem('uploadedImages', JSON.stringify(uploadedImages));
                        
                        loadMediaLibrary();
                    };
                    reader.readAsDataURL(file);
                }
            });
        }
        
        function loadRoutineManager() {
            const routineList = document.getElementById('routine-list');
            if (!routineList || !window.schoolWebsite) return;
            
            const routines = window.schoolWebsite.routines || [];
            routineList.innerHTML = '';
            
            routines.forEach((routine, index) => {
                const routineItem = createRoutineItem(routine, index);
                routineList.appendChild(routineItem);
            });
        }
        
        function createRoutineItem(routine, index) {
            const item = document.createElement('div');
            item.className = 'bg-gray-50 rounded-lg p-4';
            item.innerHTML = `
                <div class="flex justify-between items-center">
                    <div>
                        <h4 class="font-semibold text-gray-800">${routine.title}</h4>
                        <p class="text-sm text-gray-600">${routine.classes} • ${routine.schedule}</p>
                    </div>
                    <div class="space-x-2">
                        <button class="text-blue-500 hover:text-blue-700">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="text-red-500 hover:text-red-700">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </div>
            `;
            return item;
        }
    </script>
</body>
</html>/body>
</html>